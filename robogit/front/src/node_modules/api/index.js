import R from 'ramda'
import request from 'superagent'
import $ from 'jquery'

export const fetchBasket = async () => {
    const {body} = await request.get(
        'http://robogit.org:8080/api/card/get'
    );
    let res = [];
    for (let i = 0; i < body.length; ++i) {
        console.log(i + " " + body[i].information.price);
        for (let j = 0; j < body[i].amount; ++j) res.push(body[i].information.id);
    }
    return res;
};

export const fetchInformations = async () => {
  const {body} = await request.get(
    'http://robogit.org:8080/api/information'
  );
  for (let i = 0; i < body.length; ++i) {
    body[i] = body[i].information
  }
  return body;
};

export const loadMoreInformations = async ({offset}) => {
    const {body} = await request.get(
        'http://robogit.org:8080/api/information/1' //FIXME
    );
    for (let i = 0; i < body.length; ++i) {
        body[i] = body[i].information
    }
    return body;
};

export const fetchInformationById = async (id) => {
  $.ajax({
    url: "http://robogit.org:8080/api/information/by_id/" + id
  }).then(function (data) {
    return data
  });
};

export const fetchCategories = async () => {
  return [{id: '1', name: 'Контроллеры'},  {id: '2', name: 'Платформы'}, {id: '3', name: 'Сенсоры'}, {id: '4', name: 'Моторы'},
      {id: '5', name: 'Механические детали'}, {id: '6', name: 'Другое'}]
};
